############################################
################## GLOBAL ##################
############################################
armonik:
  registry: dockerhubaneo # (Pourquoi dockerhub dans le nom ???)
  armonik_admin_app: 0.12.4
global:
  namespace: "armonik"

############################################
### ARMONIK APPLICATION CONFIGURATION #####
############################################
control-plane:
  enabled: true
  #nodeSelector: {}
compute-plane:
  enabled: true
  nodeSelector: {}

############################################
############### DEPENDENCIES ###############
############################################

################## ENICONFIG ###############
eniconfig:
  enabled: false

################## MINIO-S3 ################
minio:
  enabled: false

################## REDIS ##################
redis:
  enabled: true
  architecture: "standalone"
  replica:
    replicaCount: 1
  fullnameOverride: "redis"
  tls:
    authClients: no
  master:
    containerPorts:
      redis: 6379
activemq-artemis:
  enabled: false
  replicas: 1
  fullnameOverride: "activemq"
  image:
    repository: "symptoma/activemq"
    tag: "5.18.4"

################## MONGODB ##################
mongodb:
  enabled: true
  replicaCount: 1
  image:
    repository: "arm64v8/mongo"
    tag: "8.0.4"
  fullnameOverride: "mongodb"
  nodeSelector: {}
  tls:
    enabled: true
    autoGenerated: true

################## MONGODB-SHARDED ##################
mongodb-sharded:
  enabled: false

################## RABBITMQ ##################
rabbitmq:
  enabled: false

################## TERMINATION- ##################
termination-handler:
  enabled: false

################## EFS-CSI ##################
efs-csi-driver:
  enabled: false

################## CHAOS-MASH ##################
chaos-mesh:
  enabled: false

################## KEDA ##################
keda:
  enabled: true
  nodeSelector: {}

################## NODE-EXPORTER ##################
node-exporter:
  enabled: true
  fullnameOverride: "node-exporter"

################## METRICS-SERVER ##################
metrics-server:
  enabled: true
  fullnameOverride: "metrics-server"

################## CLUSTER-AUTOSCALER ##################
cluster-autoscaler:
  enabled: false

################## GRAFANA ##################
grafana:
  grafana.ini:
      #server:
        #domain: localhost
        #root_url: http://grafana.{{ .Release.Namespace }}.svc.cluster.local:3000/grafana
        #serve_from_sub_path: false
      anonymous:
        enabled: true
  enabled: true
  createconfigmap: true
  dashboardProviders:
    dashboardproviders.yaml:
      apiVersion: 1
      providers:
      - name: 'default'
        orgId: 1
        folder: ''
        type: file
        disableDeletion: false
        editable: true
        options:
          path: /var/lib/grafana/dashboards/default
  sidecar:
    dashboards:
      enabled: true
      searchNamespace: 'armonik'
      label: grafana_dashboard
    datasources:
      enabled: true
      searchNamespace: 'armonik'
  fullnameOverride: "grafana"
  datasources:
    datasources.yaml:
      apiVersion: 1
      datasources:
      - name: Prometheus
        type: prometheus
        access: proxy
        orgId: 1
        url: http://prometheus-server.{{ .Release.Namespace }}.svc.cluster.local
        isDefault: true
        jsonData:
          tlsSkipVerify: true
        version: 1

################## FLUENT-BIT ##################
fluent-bit:
  enabled: true
  fullnameOverride: "fluent-bit"

################## SEQ ##################
seq:
  enabled: true
  fullnameOverride: "seq"
  image:
    tag: "2024.3"

################## INGRESS ##################
ingress:
  enabled: true
  nodeSelector: {}

################## PROMETHEUS ##################
prometheus:
  enabled: true
  nodeSelector: {}
  fullnameOverride: "prometheus"
  alertmanager:
    enabled: false
  kubeStateMetrics:
    enabled: true
  nodeExporter:
    enabled: true
  server:
    containerPorts:
      http: 9090
    scrapeInterval: 10s
    evaluationInterval: 30s
############################################