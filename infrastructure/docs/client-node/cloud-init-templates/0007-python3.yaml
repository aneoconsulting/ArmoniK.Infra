#cloud-config

merge_how:
  - name: list
    settings: [append]
  - name: dict
    settings: [no_replace, recurse_list]

locale: en_US.UTF-8

write_files:
  - content: |
      amazon-linux-extras enable python3.8
      yum install -y python3.8
      update-alternatives --install /usr/bin/python python /usr/bin/python3.8 1
      pip3 install virtualenv
      pip3 install python-hcl2
      pip3 install jsonpath-ng
    path: /app/install-python3.sh
    permissions: 0755
    owner: root

runcmd:
  - bash /app/install-python3.sh